#!/usr/bin/env python3

import stat
import os
import sys
from pathlib import Path

def change_mode(path):
    for dirpath, dirnames, filenames in os.walk(path):
        for dname in dirnames:
            os.chmod(os.path.join(dirpath, dname), stat.S_IRWXU)
            change_mode(os.path.join(dirpath, dname))

        for fname in filenames:
            if ".md" in fname or ".py" in fname or ".txt" in fname:
                os.chmod(os.path.join(dirpath, fname), stat.S_IRWXU ^ stat.S_IXUSR)

change_mode(sys.argv[1])
